<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:app="using:WorkDesign"
             x:Class="WorkDesign.StickPage"
             x:DataType="{x:Type app:StickPageViewModel}"
             Title="StickPage">

    <ContentPage.BindingContext>
        <app:StickPageViewModel />
    </ContentPage.BindingContext>

    <ContentPage.Resources>
        <ResourceDictionary>

            <Style x:Key="JoyStick"
                   TargetType="app:JoyStick">
                <Setter Property="WidthRequest" Value="160" />
                <Setter Property="HeightRequest" Value="160" />
                <Setter Property="ThumbSize" Value="80" />
                <Setter Property="RangeOfMotion" Value="56" />
                <Setter Property="Mode" Value="Both" />
                <Setter Property="ArrowColor" Value="{StaticResource GrayDarken3}" />
                <Setter Property="BaseBackground">
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Offset="0" Color="{StaticResource GrayDefault}" />
                        <GradientStop Offset="1" Color="{StaticResource GrayDarken1}" />
                    </LinearGradientBrush>
                </Setter>
                <Setter Property="ThumbBackground">
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Offset="0" Color="{StaticResource LightBlueDarken1}" />
                        <GradientStop Offset="1" Color="{StaticResource LightBlueLighten3}" />
                    </LinearGradientBrush>
                </Setter>
                <Setter Property="ThumbBorderBackground">
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Offset="0" Color="{StaticResource LightBlueLighten2}" />
                        <GradientStop Offset="1" Color="{StaticResource LightBlueDarken2}" />
                    </LinearGradientBrush>
                </Setter>
            </Style>

            <Style x:Key="JoyButton"
                   TargetType="Button">
                <Setter Property="WidthRequest" Value="64" />
                <Setter Property="HeightRequest" Value="64" />
                <Setter Property="CornerRadius" Value="32" />
                <Setter Property="FontSize" Value="36" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="app:ButtonOption.PressBind" Value="True" />
                <Setter Property="app:ButtonOption.PressEffect" Value="True" />
            </Style>

            <Style x:Key="AButton"
                   TargetType="Button"
                   BasedOn="{StaticResource JoyButton}">
                <Setter Property="Text" Value="A" />
                <Setter Property="TextColor" Value="{StaticResource GreenDarken4}" />
                <Setter Property="Background">
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Offset="0" Color="{StaticResource GreenDarken1}" />
                        <GradientStop Offset="1" Color="{StaticResource GreenLighten3}" />
                    </LinearGradientBrush>
                </Setter>
            </Style>

            <Style x:Key="BButton"
                   TargetType="Button"
                   BasedOn="{StaticResource JoyButton}">
                <Setter Property="Text" Value="B" />
                <Setter Property="TextColor" Value="{StaticResource RedDarken4}" />
                <Setter Property="Background">
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Offset="0" Color="{StaticResource RedDarken1}" />
                        <GradientStop Offset="1" Color="{StaticResource RedLighten3}" />
                    </LinearGradientBrush>
                </Setter>
            </Style>

            <Style x:Key="XButton"
                   TargetType="Button"
                   BasedOn="{StaticResource JoyButton}">
                <Setter Property="Text" Value="X" />
                <Setter Property="TextColor" Value="{StaticResource BlueDarken4}" />
                <Setter Property="Background">
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Offset="0" Color="{StaticResource BlueDarken1}" />
                        <GradientStop Offset="1" Color="{StaticResource BlueLighten3}" />
                    </LinearGradientBrush>
                </Setter>
            </Style>

            <Style x:Key="YButton"
                   TargetType="Button"
                   BasedOn="{StaticResource JoyButton}">
                <Setter Property="Text" Value="Y" />
                <Setter Property="TextColor" Value="{StaticResource YellowDarken4}" />
                <Setter Property="Background">
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Offset="0" Color="{StaticResource YellowDarken1}" />
                        <GradientStop Offset="1" Color="{StaticResource YellowLighten3}" />
                    </LinearGradientBrush>
                </Setter>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="*,Auto,Auto,160,*">

        <Grid Grid.Row="1"
              ColumnDefinitions="*,*">
            <Label Grid.Column="0"
                   Text="{Binding StickX}" />
            <Label Grid.Column="1"
                   Text="{Binding StickY}" />
        </Grid>

        <Grid Grid.Row="2"
              ColumnDefinitions="*,*,*,*">
            <Label Grid.Column="0"
                   Text="{Binding ButtonA}" />
            <Label Grid.Column="1"
                   Text="{Binding ButtonB}" />
            <Label Grid.Column="2"
                   Text="{Binding ButtonX}" />
            <Label Grid.Column="3"
                   Text="{Binding ButtonY}" />
        </Grid>

        <!-- Pad -->
        <Grid Grid.Row="3"
              ColumnDefinitions="*,*">

            <app:JoyStick Grid.Column="0"
                          Style="{StaticResource JoyStick}"
                          XValue="{Binding StickX}"
                          YValue="{Binding StickY}" />

            <AbsoluteLayout Grid.Column="1">
                <Button AbsoluteLayout.LayoutBounds="0,0,1,0.4" AbsoluteLayout.LayoutFlags="All"
                        Style="{StaticResource YButton}"
                        app:ButtonOption.IsPressed="{Binding ButtonY}" />
                <Button AbsoluteLayout.LayoutBounds="0,0,0.5,1" AbsoluteLayout.LayoutFlags="All"
                        Style="{StaticResource XButton}"
                        app:ButtonOption.IsPressed="{Binding ButtonX}" />
                <Button AbsoluteLayout.LayoutBounds="0,0,1.5,1" AbsoluteLayout.LayoutFlags="All"
                        Style="{StaticResource BButton}"
                        app:ButtonOption.IsPressed="{Binding ButtonB}" />
                <Button AbsoluteLayout.LayoutBounds="0,0,1,1.6" AbsoluteLayout.LayoutFlags="All"
                        Style="{StaticResource AButton}"
                        app:ButtonOption.IsPressed="{Binding ButtonA}" />
            </AbsoluteLayout>

        </Grid>

    </Grid>

</ContentPage>